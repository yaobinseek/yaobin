<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>跨步电压与单脚平衡训练</title>
    <style>
        /* 保持原有样式不变 */
        body { font-family: Arial, sans-serif; text-align: center; margin: 20px; background-color: #f8f9fa; }
        h1, h2 { color: #333; }
        .container { margin-bottom: 30px; padding: 20px; background: #ffffff; border-radius: 10px; box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1); }
        .grid-container { display: flex; flex-direction: column; align-items: center; }
        .grid { display: grid; grid-template-columns: repeat(3, 90px); gap: 5px; margin-top: 20px; }
        .grid div { width: 90px; height: 90px; font-size: 30px; display: flex; justify-content: center; align-items: center; 
                    border: 2px solid #000; cursor: pointer; background-color: lightgray; font-weight: bold; border-radius: 5px; }
        .blue { background-color: #0056b3; color: white; font-size: 45px; font-weight: bold; }
        .green { background-color: lightgreen; }
        .red { background-color: lightcoral; }
        .arrow-display { font-size: 50px; margin: 20px; font-weight: bold; color: #dc3545; }
        #countdown { font-size: 22px; color: red; font-weight: bold; margin-top: 10px; }
        #game-result { font-size: 22px; font-weight: bold; margin-top: 10px; color: #28a745; }
    </style>
</head>
<body>

    <h1>跨步电压与单脚平衡训练</h1>

    <!-- 修改后的视频部分 -->
    <div class="container">
        <h2>跨步电压逃生科普视频</h2>
        <video controls width="600" poster="assets/video/poster.jpg">
            <source src="assets/video/387.mp4" type="video/mp4">
            <source src="assets/video/387.webm" type="video/webm">
            您的浏览器不支持视频播放，请下载观看。
        </video>
    </div>

    <!-- 保持原有游戏和问卷部分不变 -->
    <!-- 九宫格游戏 -->
    <div class="container">
        <!-- ...原有游戏代码... -->
    </div>

    <!-- 知识问答 -->
    <div class="container quiz-container">
        <!-- ...原有问卷代码... -->
    </div>

    <script>
        // 游戏逻辑优化
        let score = 0;
        let round = 0;
        let currentTarget = null;
        let countdownTimer;

        const arrowMap = {
            "↖": 1, "↑": 2, "↗": 3,
            "←": 4,         "→": 6,
            "↙": 7, "↓": 8, "↘": 9
        };

        function startGame() {
            score = 0;
            round = 0;
            document.querySelectorAll('.grid div').forEach(cell => {
                cell.classList.remove('green', 'red');
            });
            document.getElementById("game-result").innerText = "";
            nextRound();
        }

        function nextRound() {
            round++;
            let arrows = Object.keys(arrowMap);
            let randomArrow = arrows[Math.floor(Math.random() * arrows.length)];
            currentTarget = arrowMap[randomArrow];
            document.getElementById("arrow").innerText = randomArrow;
        }

        function checkMove(number) {
            const cell = document.getElementById(`cell-${number}`);
            if (number === currentTarget) {
                cell.classList.add("green");
                score++;
                setTimeout(() => {
                    cell.classList.remove("green");
                    if (round < 20) nextRound();
                    else endGame();
                }, 500);
            } else {
                cell.classList.add("red");
                setTimeout(() => cell.classList.remove("red"), 500);
            }
        }

        function endGame() {
            const result = score >= 16 ? 
                `恭喜！得分 ${score}/20 通过！🎉` : 
                `需要再练习哦！得分 ${score}/20`;
            document.getElementById("game-result").innerText = result;
        }
    </script>

</body>
</html>
